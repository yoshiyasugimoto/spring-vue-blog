import{d as R,k as X,l as Y,f as V,c as a,b as o,j as u,r as l,n as Z,o as E,g as b,a as ee,m as te,p as m}from"./iframe-15G2Nn8J.js";import{d as p,w as D,e as ae}from"./decorators-Ces2D877.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./preload-helper-Dp1pzeXC.js";import"./data-BUIPDpdg.js";const ne={class:"page-header"},$=R({__name:"CategoryView",setup(C){const d=u([]),r=u(!1),i=u(!1),y=u(!1),c=u(null),z=[{title:"名前",dataIndex:"name",key:"name"},{title:"スラッグ",dataIndex:"slug",key:"slug"},{title:"説明",dataIndex:"description",key:"description"},{title:"操作",key:"actions",width:150}],t=Z({name:"",slug:"",description:""});function x(n){n?(c.value=n.id,t.name=n.name,t.slug=n.slug,t.description=n.description||""):(c.value=null,t.name="",t.slug="",t.description=""),i.value=!0}async function g(){r.value=!0;try{const n=await p.getAll();d.value=n.data}finally{r.value=!1}}async function P(){if(!t.name.trim()){m.warning("名前を入力してください");return}y.value=!0;try{c.value?(await p.update(c.value,t),m.success("カテゴリを更新しました")):(await p.create(t),m.success("カテゴリを作成しました")),i.value=!1,g()}finally{y.value=!1}}async function W(n){await p.delete(n),m.success("カテゴリを削除しました"),g()}return X(g),(n,e)=>{const w=l("a-button"),j=l("a-popconfirm"),F=l("a-space"),H=l("a-table"),L=l("a-card"),A=l("a-input"),k=l("a-form-item"),G=l("a-textarea"),J=l("a-form"),K=l("a-modal");return E(),Y("div",null,[V("div",ne,[e[6]||(e[6]=V("h2",{class:"page-title"},"カテゴリ管理",-1)),a(w,{type:"primary",onClick:e[0]||(e[0]=s=>x())},{default:o(()=>[...e[5]||(e[5]=[b("新規作成",-1)])]),_:1})]),a(L,{bordered:!1},{default:o(()=>[a(H,{"data-source":d.value,loading:r.value,columns:z,"row-key":"id",pagination:!1},{bodyCell:o(({column:s,record:M})=>[s.key==="actions"?(E(),ee(F,{key:0},{default:o(()=>[a(w,{type:"link",size:"small",onClick:Q=>x(M)},{default:o(()=>[...e[7]||(e[7]=[b("編集",-1)])]),_:1},8,["onClick"]),a(j,{title:"削除しますか？",onConfirm:Q=>W(M.id)},{default:o(()=>[a(w,{type:"link",danger:"",size:"small"},{default:o(()=>[...e[8]||(e[8]=[b("削除",-1)])]),_:1})]),_:1},8,["onConfirm"])]),_:2},1024)):te("",!0)]),_:1},8,["data-source","loading"])]),_:1}),a(K,{open:i.value,"onUpdate:open":e[4]||(e[4]=s=>i.value=s),title:c.value?"カテゴリを編集":"カテゴリを作成",onOk:P,"confirm-loading":y.value},{default:o(()=>[a(J,{layout:"vertical"},{default:o(()=>[a(k,{label:"名前",required:""},{default:o(()=>[a(A,{value:t.name,"onUpdate:value":e[1]||(e[1]=s=>t.name=s)},null,8,["value"])]),_:1}),a(k,{label:"スラッグ"},{default:o(()=>[a(A,{value:t.slug,"onUpdate:value":e[2]||(e[2]=s=>t.slug=s),placeholder:"auto-generated"},null,8,["value"])]),_:1}),a(k,{label:"説明"},{default:o(()=>[a(G,{value:t.description,"onUpdate:value":e[3]||(e[3]=s=>t.description=s),rows:3},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["open","title","confirm-loading"])])}}}),se=oe($,[["__scopeId","data-v-d15e5c7b"]]);$.__docgenInfo={exportName:"default",displayName:"CategoryView",description:"",tags:{},sourceFiles:["/Users/sugimotoyoshiwataru/ai-driven-repository/spring-vue-blog/frontend/src/views/admin/CategoryView.vue"]};const ue={title:"Views/Admin/Category",component:se,tags:["autodocs"]},f={decorators:[D()]},v={decorators:[ae()]},_={decorators:[D()],parameters:{chromatic:{delay:800}},play:async({canvasElement:C})=>{await new Promise(r=>setTimeout(r,500));const d=Array.from(C.querySelectorAll("button")).find(r=>{var i;return(i=r.textContent)==null?void 0:i.includes("新規作成")});d&&d.click()}};var I,N,S;f.parameters={...f.parameters,docs:{...(I=f.parameters)==null?void 0:I.docs,source:{originalSource:`{
  decorators: [withMockedApis()]
}`,...(S=(N=f.parameters)==null?void 0:N.docs)==null?void 0:S.source}}};var B,U,O;v.parameters={...v.parameters,docs:{...(B=v.parameters)==null?void 0:B.docs,source:{originalSource:`{
  decorators: [withMockedEmptyApis()]
}`,...(O=(U=v.parameters)==null?void 0:U.docs)==null?void 0:O.source}}};var T,h,q;_.parameters={..._.parameters,docs:{...(T=_.parameters)==null?void 0:T.docs,source:{originalSource:`{
  decorators: [withMockedApis()],
  parameters: {
    chromatic: {
      delay: 800
    }
  },
  play: async ({
    canvasElement
  }) => {
    await new Promise(resolve => setTimeout(resolve, 500));
    const btn = Array.from(canvasElement.querySelectorAll('button')).find(el => el.textContent?.includes('新規作成')) as HTMLButtonElement;
    if (btn) btn.click();
  }
}`,...(q=(h=_.parameters)==null?void 0:h.docs)==null?void 0:q.source}}};const me=["Default","Empty","WithModalOpen"];export{f as Default,v as Empty,_ as WithModalOpen,me as __namedExportsOrder,ue as default};
